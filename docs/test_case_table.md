# パートナー要員管理システム テストケース表

## 1. バックエンドユニットテスト

| ID | テストケース名 | 説明 | 前提条件 | テスト手順 | 期待結果 | 実施状況 | 結果 | 備考 |
|---|---|---|---|---|---|---|---|---|
| UT-001 | UsersService - ユーザー取得 | ユーザー一覧取得機能のテスト | モックリポジトリが設定されている | service.findAll()を呼び出す | ユーザー一覧が返される | 実装済み | 未実行 | - |
| UT-002 | UsersService - ユーザー詳細取得 | 特定ユーザー取得機能のテスト | モックリポジトリが設定されている | service.findOne(id)を呼び出す | 指定IDのユーザーが返される | 実装済み | 未実行 | - |
| UT-003 | UsersService - ユーザー作成 | ユーザー作成機能のテスト | モックリポジトリが設定されている | service.create(dto)を呼び出す | 新規ユーザーが作成される | 実装済み | 未実行 | - |
| UT-004 | UsersService - ユーザー更新 | ユーザー更新機能のテスト | モックリポジトリが設定されている | service.update(id, dto)を呼び出す | ユーザー情報が更新される | 実装済み | 未実行 | - |
| UT-005 | UsersService - ユーザー削除 | ユーザー削除機能のテスト | モックリポジトリが設定されている | service.remove(id)を呼び出す | ユーザーが削除される | 実装済み | 未実行 | - |
| UT-006 | PartnersService - パートナー一覧取得 | パートナー企業一覧取得機能のテスト | モックリポジトリが設定されている | service.findAll()を呼び出す | パートナー企業一覧が返される | 実装済み | 未実行 | - |
| UT-007 | PartnersService - パートナー詳細取得 | 特定パートナー企業取得機能のテスト | モックリポジトリが設定されている | service.findOne(id)を呼び出す | 指定IDのパートナー企業が返される | 実装済み | 未実行 | - |
| UT-008 | ProjectsService - 案件一覧取得 | 案件一覧取得機能のテスト | モックリポジトリが設定されている | service.findAll()を呼び出す | 案件一覧が返される | 実装済み | 未実行 | - |
| UT-009 | ProjectsService - 案件詳細取得 | 特定案件取得機能のテスト | モックリポジトリが設定されている | service.findOne(id)を呼び出す | 指定IDの案件が返される | 実装済み | 未実行 | - |
| UT-010 | StaffService - 要員一覧取得 | 要員一覧取得機能のテスト | モックリポジトリが設定されている | service.findAll()を呼び出す | 要員一覧が返される | 実装済み | 未実行 | - |
| UT-011 | ContractsService - 契約一覧取得 | 契約一覧取得機能のテスト | モックリポジトリが設定されている | service.findAll()を呼び出す | 契約一覧が返される | 実装済み | 未実行 | - |
| UT-012 | AuthService - ユーザー認証 | ユーザー認証機能のテスト | モックリポジトリが設定されている | service.validateUser(username, password)を呼び出す | 有効なユーザーが返される | 実装済み | 未実行 | - |
| UT-013 | ApplicationsService - 応募者一覧取得 | 応募者一覧取得機能のテスト | モックリポジトリが設定されている | service.findAll()を呼び出す | 応募者一覧が返される | 実装済み | 未実行 | - |
| UT-014 | ApplicationsService - 応募者作成 | 応募者作成機能のテスト | モックリポジトリが設定されている | service.create(dto)を呼び出す | 新規応募者が作成される | 実装済み | 未実行 | - |
| UT-015 | EvaluationsService - 評価一覧取得 | 評価一覧取得機能のテスト | モックリポジトリが設定されている | service.findAll()を呼び出す | 評価一覧が返される | 実装済み | 未実行 | - |
| UT-016 | NotificationsService - 通知作成 | 通知作成機能のテスト | モックリポジトリが設定されている | service.create(dto)を呼び出す | 新規通知が作成される | 実装済み | 未実行 | - |
| UT-017 | WorkflowsService - 依頼作成 | 依頼作成機能のテスト | モックリポジトリが設定されている | service.createRequest(dto)を呼び出す | 新規依頼が作成される | 実装済み | 未実行 | - |
| UT-018 | FileUploadService - ファイルアップロード | ファイルアップロード機能のテスト | モックファイルシステムが設定されている | service.uploadFile(file, destination)を呼び出す | ファイルがアップロードされる | 実装済み | 未実行 | - |
| UT-019 | ReportsService - レポート生成 | レポート生成機能のテスト | モックリポジトリが設定されている | service.generateReport(params)を呼び出す | レポートが生成される | 実装済み | 未実行 | - |

## 2. 統合テスト

| ID | テストケース名 | 説明 | 前提条件 | テスト手順 | 期待結果 | 実施状況 | 結果 | 備考 |
|---|---|---|---|---|---|---|---|---|
| IT-001 | ワークフロー承認と通知の連携 - 依頼作成時の通知 | 依頼作成時に承認者への通知が送信されるかテスト | モックリポジトリが設定されている | 1. 依頼を作成<br>2. 通知の送信を確認 | 承認者への通知が送信される | 実装済み<br>実行済み | 失敗 | NotificationsServiceとWorkflowsServiceの連携に問題あり |
| IT-002 | ワークフロー承認と通知の連携 - 依頼承認時の通知 | 依頼承認時に申請者への通知が送信されるかテスト | モックリポジトリが設定されている | 1. 依頼を承認<br>2. 通知の送信を確認 | 申請者への通知が送信される | 実装済み<br>実行済み | 失敗 | createApprovalNotificationメソッドが呼び出されていない |
| IT-003 | ファイルアップロードと関連エンティティの連携 - 案件書類 | 案件に関連する書類をアップロードできるかテスト | モックリポジトリとファイルサービスが設定されている | 1. 案件書類をアップロード<br>2. 案件エンティティの更新を確認 | 案件エンティティに書類情報が追加される | 実装済み<br>実行済み | 失敗 | ProjectsServiceにaddDocumentメソッドが存在しない |
| IT-004 | ファイルアップロードと関連エンティティの連携 - 要員スキルシート | 要員のスキルシートをアップロードできるかテスト | モックリポジトリとファイルサービスが設定されている | 1. スキルシートをアップロード<br>2. 要員エンティティの更新を確認 | 要員エンティティにスキルシート情報が追加される | 実装済み<br>実行済み | 失敗 | StaffServiceにaddSkillSheetメソッドが存在しない |
| IT-005 | 応募者管理と評価の連携 - 面接記録追加 | 応募者の面接記録を追加できるかテスト | モックリポジトリが設定されている | 1. 面接記録を追加<br>2. 応募者エンティティの更新を確認 | 応募者エンティティに面接記録が追加される | 実装済み<br>実行済み | 失敗 | ApplicationsServiceにaddInterviewRecordメソッドが存在しない |
| IT-006 | 応募者管理と評価の連携 - 要員評価登録 | 要員の評価を登録できるかテスト | モックリポジトリが設定されている | 1. 要員評価を登録<br>2. 評価エンティティの作成を確認 | 評価エンティティが作成される | 実装済み<br>実行済み | 失敗 | EvaluationsServiceのcreateEvaluationメソッドの引数型が一致しない |

## 3. E2Eテスト

| ID | テストケース名 | 説明 | 前提条件 | テスト手順 | 期待結果 | 実施状況 | 結果 | 備考 |
|---|---|---|---|---|---|---|---|---|
| E2E-001 | 案件ワークフロー - 新規案件作成から承認まで | 新規案件の作成から承認までの一連の流れをテスト | アプリケーションが起動している<br>テストユーザーが存在する | 1. ログイン<br>2. 案件作成<br>3. 承認申請<br>4. 承認者ログイン<br>5. 承認処理 | 案件が承認され、承認履歴が記録される | 実装済み<br>実行試行 | 環境制約 | Playwrightのブラウザインストールが必要 |
| E2E-002 | 案件ワークフロー - 案件の却下と再申請 | 案件の却下と再申請の流れをテスト | アプリケーションが起動している<br>テストユーザーが存在する | 1. ログイン<br>2. 案件作成<br>3. 承認申請<br>4. 承認者ログイン<br>5. 却下処理<br>6. 申請者ログイン<br>7. 案件修正<br>8. 再申請 | 案件が却下され、修正後に再申請される | 実装済み<br>実行試行 | 環境制約 | Playwrightのブラウザインストールが必要 |
| E2E-003 | 案件ワークフロー - 応募者管理機能 | 案件の応募者管理機能をテスト | アプリケーションが起動している<br>テストユーザーが存在する | 1. ログイン<br>2. 案件詳細表示<br>3. 応募者登録<br>4. 面接記録追加<br>5. ステータス更新 | 応募者が登録され、面接記録が追加され、ステータスが更新される | 実装済み<br>実行試行 | 環境制約 | Playwrightのブラウザインストールが必要 |
| E2E-004 | 契約管理 - 新規契約作成から更新まで | 新規契約の作成から更新までの一連の流れをテスト | アプリケーションが起動している<br>テストユーザーが存在する | 1. ログイン<br>2. 契約作成<br>3. 契約書アップロード<br>4. 契約更新 | 契約が作成され、契約書がアップロードされ、契約が更新される | 未実装 | 未実行 | - |
| E2E-005 | 要員評価 - スキル評価と履歴管理 | 要員のスキル評価と履歴管理をテスト | アプリケーションが起動している<br>テストユーザーが存在する | 1. ログイン<br>2. 要員詳細表示<br>3. スキル評価登録<br>4. 評価履歴確認 | スキル評価が登録され、評価履歴が確認できる | 未実装 | 未実行 | - |

## 4. 発見された問題と対応状況

| ID | 関連テスト | 問題の説明 | 重要度 | 対応状況 | 対応方針 |
|---|---|---|---|---|---|
| BUG-001 | IT-001, IT-002 | NotificationsServiceとWorkflowsServiceの連携が不完全 | 高 | 未対応 | WorkflowsServiceにNotificationsServiceの呼び出しを追加する |
| BUG-002 | IT-003 | ProjectsServiceにaddDocumentメソッドが存在しない | 中 | 未対応 | ProjectsServiceにaddDocumentメソッドを実装する |
| BUG-003 | IT-004 | StaffServiceにaddSkillSheetメソッドが存在しない | 中 | 未対応 | StaffServiceにaddSkillSheetメソッドを実装する |
| BUG-004 | IT-005 | ApplicationsServiceにaddInterviewRecordメソッドが存在しない | 中 | 未対応 | ApplicationsServiceにaddInterviewRecordメソッドを実装する |
| BUG-005 | IT-006 | EvaluationsServiceのcreateEvaluationメソッドの引数型が一致しない | 中 | 未対応 | CreateEvaluationDtoの型定義を修正する |
| BUG-006 | E2E-001, E2E-002, E2E-003 | E2Eテスト環境の制約（Playwrightブラウザ未インストール） | 低 | 未対応 | 本番環境でのテスト実行時にブラウザをインストールする |

## 5. テスト進捗状況サマリー

| テストレベル | 計画テスト数 | 実装済み | 実行済み | 成功 | 失敗 | 未実行 | 実装率 | 実行率 | 成功率 |
|---|---|---|---|---|---|---|---|---|---|
| ユニットテスト | 19 | 19 | 0 | 0 | 0 | 19 | 100% | 0% | - |
| 統合テスト | 6 | 6 | 6 | 0 | 6 | 0 | 100% | 100% | 0% |
| E2Eテスト | 5 | 3 | 3 | 0 | 3 | 2 | 60% | 60% | 0% |
| 合計 | 30 | 28 | 9 | 0 | 9 | 21 | 93% | 30% | 0% |

## 6. 次のステップ

1. 統合テストで発見された問題の修正
2. バックエンドユニットテストの実行
3. 残りのE2Eテストの実装
4. テスト結果報告書の作成
5. 最終テスト完了報告
